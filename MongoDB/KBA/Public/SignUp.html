<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>SignUp</title>
</head>
<body class="flex justify-center mt-20">
    <div class="bg-slate-400 w-96 h-auto pl-12 font-serif text-xl rounded-md ...	">
        <div class="mt-6 ">
            <p class="font-bold text-3xl">Sign Up  </p>
        </div>
        <div class="mt-6 ">
            <label for="name" >Name :</label>
        </div>
        <div><input class="rounded-md ..." type="text" id="Name"  required></div>
        
        <div class="mt-6">
            <label for="email">Email :</label>
        </div>
        <div><input class="rounded-md ..." type="email"  id="Email" required></div>
        
        <div class="mt-6">
            <label for="password">Password :</label></div>
        <div>
            <input class="rounded-md ..." type="password"  id="Password" required></div>
          
          
            <div class="mt-6 ">
                <label for="name">Role:</label>
            </div>

            <div>
               <select class="rounded-md w-[250px]"  name="" id="Select">
                <option value="Admin">Admin</option>
                <option value="User">User</option>
               </select>    
            </div>

        
        <div class="mt-6 pl-24">
            <button onclick="signup()" class="bg-fuchsia-900 text-white font-bold rounded w-[110px] h-[35px]">Sign Up</button></div>
  
        <div class="mt-3 mb-6">
            <p>Already Have a Account ? <a class="text-blue-600" href="loginpage.html">Login</a></p> </div>
  
    </div>

    <script>
       
       
        async function signup(){
           event.preventDefault();
            
        const name=document.getElementById('Name').value;
        const email=document.getElementById('Email').value;
        const password=document.getElementById('Password').value;
        const select=document.getElementById('Select').value;
          
        console.log(name);
        console.log(email);
        console.log(password);
        console.log(select);

        const response= await fetch('http://127.0.0.1:8000/signup',{
            method:'POST',
            headers:{
                "Content-Type":'application/json'
            },
            body:JSON.stringify({
                Name:name,
                Email:email,
                Password:password,
                Role:select
            })
        })
        console.log(response);

        const data=await response.text();
        console.log(data);
        
         if(response.status == '201'){
            window.location.href='loginpage.html';

        }else if(response.status == '400'){
            alert("Username already exist");

        }else{
            alert('Please try after sometime')
        }
    }
        

            
        
    </script>
</body>
</html>